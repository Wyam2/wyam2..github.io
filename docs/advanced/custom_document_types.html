<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
        <title>Wyam2 - Custom Document Types</title>
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/assets/css/override.css" rel="stylesheet">
        <script src="/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>        
        <script src="/assets/js/app.min.js"></script>         
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/assets/js/mermaid.min.js"></script>
        <script src="/assets/js/svg-pan-zoom.min.js"></script>

        <meta name="google" content="notranslate">
<meta http-equiv="Content-Language" content="en">
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/" class="logo">

                                <!-- mini logo for sidebar mini 50x50 pixels -->
                                <span class="logo-mini"><img src="/assets/img/logo.png"></span>
                                <!-- logo for regular state and mobile devices -->
                                <span class="logo-lg"><img src="/assets/img/logo.png"></span>
                                            </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li><a href="/blog">Blog</a></li>
        <li class="active"><a href="/docs">Documentation</a></li>
        <li><a href="/recipes">Recipes</a></li>
        <li><a href="/modules">Modules</a></li>
        <li><a href="/shortcodes">Shortcodes</a></li>
        <li><a href="/api">API</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
        <div><p><a href="https://github.com/Wyam2/docs/tree/main/input/docs/advanced/custom_document_types.md"><i class="fa fa-pencil-square" aria-hidden="true"></i> Edit Content</a></p></div>
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#the-easy-way">The Easy Way</a></p>
<p><a href="#more-advanced">More Advanced</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li class="treeview">
                    <a href="/docs/concepts">Concepts</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/concepts/documents">Documents</a></li>
                <li><a href="/docs/concepts/metadata">Metadata</a></li>
                <li><a href="/docs/concepts/modules">Modules</a></li>
                <li><a href="/docs/concepts/shortcodes">Shortcodes</a></li>
                <li><a href="/docs/concepts/pipelines">Pipelines</a></li>
                <li><a href="/docs/concepts/recipes">Recipes</a></li>
                <li><a href="/docs/concepts/themes">Themes</a></li>
                <li><a href="/docs/concepts/io">I/O</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/usage">Usage</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/usage/obtaining">Obtaining</a></li>
                <li><a href="/docs/usage/command-line">Command Line</a></li>
                <li><a href="/docs/usage/configuration">Configuration</a></li>
                <li><a href="/docs/usage/settings">Settings</a></li>
                <li><a href="/docs/usage/embedding">Embedding</a></li>
                <li><a href="/docs/usage/executing-in-a-unit-test">Executing In A Unit Test</a></li>
                <li><a href="/docs/usage/examples">Examples</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/deployment">Deployment</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/deployment/appveyor">AppVeyor for Continuous Integration</a></li>
                <li><a href="/docs/deployment/azure">Azure</a></li>
                <li><a href="/docs/deployment/netlify">Netlify</a></li>
                <li><a href="/docs/deployment/serving-from-a-subdirectory">Serving From A Subdirectory</a></li>
                <li><a href="/docs/deployment/ssl-and-https">SSL and HTTPS</a></li>
                <li><a href="/docs/deployment/cake">Using Cake</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/extensibility">Extensibility</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/extensibility/creating-a-theme">Creating A Theme</a></li>
                <li><a href="/docs/extensibility/customizing-recipe-pipelines">Customizing Recipe Pipelines</a></li>
                <li><a href="/docs/extensibility/customizing-themes">Customizing Themes</a></li>
                <li><a href="/docs/extensibility/writing-a-module">Writing a Module</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/docs/advanced">Advanced</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="selected"><a href="/docs/advanced/custom_document_types">Custom Document Types</a></li>
                <li><a href="/docs/advanced/document-content-streams">Document Content Streams</a></li>
                <li><a href="/docs/advanced/migrating-to-0.12.x">Migrating to 0.12.x</a></li>
                <li><a href="/docs/advanced/setting-the-culture">Setting The Culture</a></li>
                <li><a href="/docs/advanced/what_to_exclude_from_source_control">What To Exclude From Source Control</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/resources">Resources</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/resources/some-background">Some Background</a></li>
                <li><a href="/docs/resources/built-with-wyam">Built With Wyam</a></li>
                <li><a href="/docs/resources/blog-posts">Blog Posts</a></li>
                <li><a href="/docs/resources/tools">Tools</a></li>
                <li><a href="/docs/resources/hosts">Hosts</a></li>

                    </ul>
                </li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>Custom Document Types</h1>
		</section>
	<section class="content">
		<p>The default <code><a href="/api/Wyam.Common.Documents/IDocument">IDocument</a></code> implementation that gets passed through the pipeline exposes the document metadata as well as some default properties like <code><a href="/api/Wyam.Common.Documents/IDocument/A839CC25">IDocument.Source</a></code>. However, there may be times that it would be handy to give your document some smarts and introduce extra properties and methods. It's easy to make your own document type and tell the engine to use it instead of the default.</p>
<h1 id="the-easy-way">The Easy Way</h1>
<p>The easiest way to do this is to use the built-in helpers for custom document types. This starts with the <code><a href="/api/Wyam.Core.Documents/CustomDocument">CustomDocument</a></code> base class. Derive a new document class from <code><a href="/api/Wyam.Core.Documents/CustomDocument">CustomDocument</a></code> in <a href="/docs/usage/configuration">your configuration file</a>. The base class implements <code><a href="/api/Wyam.Common.Documents/IDocument">IDocument</a></code> so you will have access to all the metadata that you normally would from the default implementation. This allows you to "wrap" metadata getters and setters with your own special logic. You can also add any additional properties and methods that you need to.</p>
<p>The only thing that you should keep in mind is that you may need to implement the <code>CustomDocument.Clone()</code> method (it's declared as <code>protected virtual</code>). The default implementation performs an <code>object.MemberwiseClone()</code> to get a new instance of your custom document class when needed. However, if you have any special cloning requirements (for example, your document class should be deep-cloned), you will need to override this method and implement it yourself. The only requirement is that it must return a new instance of your document class.</p>
<p>Once you've created your <code><a href="/api/Wyam.Core.Documents/CustomDocument">CustomDocument</a></code> class, you need to tell the engine to use it instead of the default <code><a href="/api/Wyam.Common.Documents/IDocument">IDocument</a></code> implementation. This can be done using the <code><a href="/api/Wyam.Configuration.ConfigScript/ScriptBase/395A65D6">ScriptBase.SetCustomDocumentType&lt;T&gt;()</a></code> method in your <a href="/docs/usage/configuration">configuration file</a>. Just use your document type as the generic parameter and everything else will be rigged up for you.</p>
<p>Here is an example configuration file with a custom document type:</p>
<pre><code>public class MyDocument : <a href="/api/Wyam.Core.Documents/CustomDocument">CustomDocument</a>
{
    // Gets the value from metadata and converts it to lowercase
    public string LowercaseTitle
    {
        get { return String("Title").ToLower(); }
    }
    
    // Stores a value directly in the new document type
    public DateTime Published { get; set; }
    
    protected override <a href="/api/Wyam.Core.Documents/CustomDocument">CustomDocument</a> Clone()
    {
        return new MyDocument
        {
            // The metadata will be automatically cloned for you,
            // all you have to do is clone any additional properties
            Published = Published
        };
    }
}

SetCustomDocumentType&lt;MyDocument&gt;();

Pipelines.Add("Posts",
    ReadFiles(@"posts\*.md"),  // Read all markdown files in the "posts" directory
    FrontMatter(Yaml()),  // Load any frontmatter and parse it as YAML markup
    Trace(((MyDocument)@doc).LowercaseTitle)  // Cast the document to the custom type and trace the LowercaseTitle property
);
</code></pre>
<h1 id="more-advanced">More Advanced</h1>
<p>Under the hood, Wyam actually has a very flexible architecture that gives you full control over document types and construction. The approach above is designed to abstract most of this, but you can go deeper for a more custom implementation. Specifically, all your custom document type has to do is implement <code><a href="/api/Wyam.Common.Documents/IDocument">IDocument</a></code>. This interface requires several document properties (such as <code><a href="/api/Wyam.Common.Documents/IDocument/A839CC25">IDocument.Source</a></code>) as well as a corresponding implementation of <code><a href="/api/Wyam.Common.Meta/IMetadata">IMetadata</a></code>. How you implement these interfaces is totally up to you. The <code><a href="/api/Wyam.Core.Documents/CustomDocument">CustomDocument</a></code> base class above is really just a thin wrapper around the underlying default implementation of <code><a href="/api/Wyam.Common.Documents/IDocument">IDocument</a></code> and simply delegates the interface implementation to the wrapped document.</p>
<p>Once you have your fully customized <code><a href="/api/Wyam.Common.Documents/IDocument">IDocument</a></code> implementation, you also need to implement <code><a href="/api/Wyam.Common.Documents/IDocumentFactory">IDocumentFactory</a></code> which tells the engine how to create new instances of your custom document class. Again, the simple approach above actually uses a special factory designed specifically for <code><a href="/api/Wyam.Core.Documents/CustomDocument">CustomDocument</a></code> classes which is swapped in during the call to <code><a href="/api/Wyam.Configuration.ConfigScript/ScriptBase/395A65D6">ScriptBase.SetCustomDocumentType&lt;T&gt;()</a></code>. When you create your own factory, you'll need to replace it in the engine by setting <code><a href="/api/Wyam.Core.Execution/Engine/18314DAF">Engine.DocumentFactory</a></code> in your <a href="/docs/usage/configuration">configuration file</a>.</p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                Wyam2 is maintained by <a href="https://avornicesei.com">Simona Avornicesei</a> and <a href="https://github.com/Wyam2/Wyam/graphs/contributors">other awesome contributors</a>, as a continuation of the <a href="https://github.com/Wyamio/Wyam">Wyam</a> project crafted by <a href="https://daveaglick.com">Dave Glick</a>. <a href="https://github.com/Wyam2/Wyam">Code on GitHub</a>. This site was entirely generated by Wyam. Check out <a href="https://github.com/Wyam2/docs">the site code on GitHub</a>.
<br><br>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        <div class="github-button">
    <a href="https://github.com/Wyam2/Wyam"><i class="fa fa-github"></i> GitHub</a>
</div>

        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>